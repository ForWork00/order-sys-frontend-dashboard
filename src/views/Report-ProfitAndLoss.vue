<script setup>
import { ref } from "vue";
import axios from "axios";

const VITE_API_URL = import.meta.env.VITE_API_URL;

const incomeStatement = ref({
  ç‡Ÿæ¥­æ”¶å…¥: [],
  ç‡Ÿæ¥­ç¸½æ”¶å…¥: 0,
  ç‡Ÿæ¥­æˆæœ¬: [],
  ç‡Ÿæ¥­ç¸½æˆæœ¬: 0,
  æ¯›åˆ©: 0,
  ç‡Ÿæ¥­è²»ç”¨: [],
  ç‡Ÿæ¥­åˆ©æ½¤: 0,
  æ¥­å¤–æ”¶å…¥: [],
  æ¥­å¤–æ”¯å‡º: [],
  åˆ©æ½¤ç¸½é¡: 0,
  æ‰€å¾—ç¨…: [],
  æ·¨åˆ©æ½¤: 0,
  å…¶ä»–ç¶œåˆæç›Š: 0,
  å…¨é¢æ”¶ç›Šç¸½é¡: 0
});

// å–å¾—æç›Šè¡¨æ•¸æ“š
const fetchIncomeStatement = async () => {
  try {
    const response = await axios.get(`${VITE_API_URL}/accounting/income_statement`);
    console.log("ğŸ“Š æç›Šè¡¨ API å›æ‡‰ï¼š", response.data);
    incomeStatement.value = response.data;
  } catch (error) {
    console.error("âŒ ç„¡æ³•å–å¾—æç›Šè¡¨æ•¸æ“šï¼š", error);
  }
};
</script>

<template>
  <div class="container">
    <h1>æç›Šè¡¨</h1>
    <div class="container-btn">
      <button @click="fetchIncomeStatement">ç²å–æç›Šè¡¨</button>
    </div>

    <h3>ç‡Ÿæ¥­æ”¶å…¥</h3>
    <table v-if="incomeStatement['ç‡Ÿæ¥­æ”¶å…¥'] && incomeStatement['ç‡Ÿæ¥­æ”¶å…¥'].length > 0">
      <thead>
        <tr>
          <th>ä»£ç¢¼</th>
          <th>ç§‘ç›®</th>
          <th>æœŸæœ«é¤˜é¡</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="item in incomeStatement['ç‡Ÿæ¥­æ”¶å…¥']" :key="item.ä»£ç¢¼">
          <td>{{ item.ä»£ç¢¼ }}</td>
          <td>{{ item.ç§‘ç›® }}</td>
          <td>${{ item.æœŸæœ«é¤˜é¡.toLocaleString() }}</td>
        </tr>
      </tbody>
    </table>
    <p>ç‡Ÿæ¥­ç¸½æ”¶å…¥: ${{ incomeStatement['ç‡Ÿæ¥­ç¸½æ”¶å…¥'] }}</p>

    <h3>ç‡Ÿæ¥­æˆæœ¬</h3>
    <table v-if="incomeStatement['ç‡Ÿæ¥­æˆæœ¬'] && incomeStatement['ç‡Ÿæ¥­æˆæœ¬'].length > 0">
      <thead>
        <tr>
          <th>ä»£ç¢¼</th>
          <th>ç§‘ç›®</th>
          <th>æœŸæœ«é¤˜é¡</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="item in incomeStatement['ç‡Ÿæ¥­æˆæœ¬']" :key="item.ä»£ç¢¼">
          <td>{{ item.ä»£ç¢¼ }}</td>
          <td>{{ item.ç§‘ç›® }}</td>
          <td>${{ item.æœŸæœ«é¤˜é¡.toLocaleString() }}</td>
        </tr>
      </tbody>
    </table>
    <p>ç‡Ÿæ¥­ç¸½æˆæœ¬: ${{ incomeStatement['ç‡Ÿæ¥­ç¸½æˆæœ¬'] }}</p>
    <p>æ¯›åˆ©: ${{ incomeStatement['æ¯›åˆ©'] }}</p>

    <h3>ç‡Ÿæ¥­è²»ç”¨</h3>
    <table v-if="incomeStatement['ç‡Ÿæ¥­è²»ç”¨'] && incomeStatement['ç‡Ÿæ¥­è²»ç”¨'].length > 0">
      <thead>
        <tr>
          <th>ä»£ç¢¼</th>
          <th>ç§‘ç›®</th>
          <th>æœŸæœ«é¤˜é¡</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="item in incomeStatement['ç‡Ÿæ¥­è²»ç”¨']" :key="item.ä»£ç¢¼">
          <td>{{ item.ä»£ç¢¼ }}</td>
          <td>{{ item.ç§‘ç›® }}</td>
          <td>${{ item.æœŸæœ«é¤˜é¡.toLocaleString() }}</td>
        </tr>
      </tbody>
    </table>
    <p>ç‡Ÿæ¥­åˆ©æ½¤: ${{ incomeStatement['ç‡Ÿæ¥­åˆ©æ½¤'] }}</p>

    <h3>æ¥­å¤–æ”¶å…¥</h3>
    <table v-if="incomeStatement['æ¥­å¤–æ”¶å…¥'] && incomeStatement['æ¥­å¤–æ”¶å…¥'].length > 0">
      <thead>
        <tr>
          <th>ä»£ç¢¼</th>
          <th>ç§‘ç›®</th>
          <th>æœŸæœ«é¤˜é¡</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="item in incomeStatement['æ¥­å¤–æ”¶å…¥']" :key="item.ä»£ç¢¼">
          <td>{{ item.ä»£ç¢¼ }}</td>
          <td>{{ item.ç§‘ç›® }}</td>
          <td>${{ item.æœŸæœ«é¤˜é¡.toLocaleString() }}</td>
        </tr>
      </tbody>
    </table>

    <h3>æ¥­å¤–æ”¯å‡º</h3>
    <table v-if="incomeStatement['æ¥­å¤–æ”¯å‡º'] && incomeStatement['æ¥­å¤–æ”¯å‡º'].length > 0">
      <thead>
        <tr>
          <th>ä»£ç¢¼</th>
          <th>ç§‘ç›®</th>
          <th>æœŸæœ«é¤˜é¡</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="item in incomeStatement['æ¥­å¤–æ”¯å‡º']" :key="item.ä»£ç¢¼">
          <td>{{ item.ä»£ç¢¼ }}</td>
          <td>{{ item.ç§‘ç›® }}</td>
          <td>${{ item.æœŸæœ«é¤˜é¡.toLocaleString() }}</td>
        </tr>
      </tbody>
    </table>

    <p>åˆ©æ½¤ç¸½é¡: ${{ incomeStatement['åˆ©æ½¤ç¸½é¡'] }}</p>

    <h3>æ‰€å¾—ç¨…</h3>
    <table v-if="incomeStatement['æ‰€å¾—ç¨…'] && incomeStatement['æ‰€å¾—ç¨…'].length > 0">
      <thead>
        <tr>
          <th>ä»£ç¢¼</th>
          <th>ç§‘ç›®</th>
          <th>æœŸæœ«é¤˜é¡</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="item in incomeStatement['æ‰€å¾—ç¨…']" :key="item.ä»£ç¢¼">
          <td>{{ item.ä»£ç¢¼ }}</td>
          <td>{{ item.ç§‘ç›® }}</td>
          <td>${{ item.æœŸæœ«é¤˜é¡.toLocaleString() }}</td>
        </tr>
      </tbody>
    </table>

    <p>æ·¨åˆ©æ½¤: ${{ incomeStatement['æ·¨åˆ©æ½¤'] }}</p>
    <p>å…¶ä»–ç¶œåˆæç›Š: ${{ incomeStatement['å…¶ä»–ç¶œåˆæç›Š'] }}</p>
    <p>å…¨é¢æ”¶ç›Šç¸½é¡: ${{ incomeStatement['å…¨é¢æ”¶ç›Šç¸½é¡'] }}</p>
  </div>
</template>

<style scoped>
h1 {
  font-size: 30px; /* æ¨™é¡Œå­—é«”å¤§å° */
  text-align: center; /* æ¨™é¡Œå±…ä¸­ */
  font-family: 'Roboto', sans-serif; 
  font-weight: bold; /* è¨­ç½®å­—é«”ç‚ºåŠ ç²— */
  margin-bottom: 20px; /* æ¨™é¡Œä¸‹æ–¹çš„é–“è·ï¼Œæ ¹æ“šéœ€æ±‚å¯ä»¥èª¿æ•´ */
}
.container {
  padding: 20px;
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  max-width: 80%;
  margin: auto;
}

.container-btn {
  display: flex;
  justify-content: space-between;
}

button {
  background-color: #4CAF50;
  color: white;
  border: none;
  padding: 10px 15px;
  border-radius: 5px;
  cursor: pointer;
  font-size: 14px;
  transition: background 0.3s ease;
}

button:hover {
  background-color: #45a049;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin: 20px 0;
}

th, td {
  border: 1px solid #ddd;
  padding: 10px;
  text-align: center;
  width: 33%;
}

th {
  background-color: #f4f4f4;
}
</style>
